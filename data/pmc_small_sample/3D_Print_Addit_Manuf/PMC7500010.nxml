
<!DOCTYPE article
PUBLIC "-//NLM//DTD JATS (Z39.96) Journal Archiving and Interchange DTD with MathML3 v1.2 20190208//EN" "JATS-archivearticle1-mathml3.dtd">
<article xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:mml="http://www.w3.org/1998/Math/MathML" article-type="research-article"><?properties open_access?><front><journal-meta><journal-id journal-id-type="nlm-ta">3D Print Addit Manuf</journal-id><journal-id journal-id-type="iso-abbrev">3D Print Addit Manuf</journal-id><journal-id journal-id-type="publisher-id">3dp</journal-id><journal-title-group><journal-title>3d Printing and Additive Manufacturing</journal-title></journal-title-group><issn pub-type="ppub">2329-7662</issn><issn pub-type="epub">2329-7670</issn><publisher><publisher-name>Mary Ann Liebert, Inc.</publisher-name><publisher-loc>140 Huguenot Street, 3rd FloorNew Rochelle, NY 10801USA</publisher-loc></publisher></journal-meta><article-meta><article-id pub-id-type="pmid">32953939</article-id><article-id pub-id-type="pmc">7500010</article-id><article-id pub-id-type="publisher-id">10.1089/3dp.2016.0033</article-id><article-id pub-id-type="doi">10.1089/3dp.2016.0033</article-id><article-categories><subj-group subj-group-type="heading"><subject>Original Articles</subject></subj-group></article-categories><title-group><article-title>Curved Layer Fused Filament Fabrication Using Automated Toolpath Generation</article-title></title-group><contrib-group><contrib contrib-type="author" corresp="yes"><name><surname>Llewellyn-Jones</surname><given-names>Thomas</given-names></name><xref ref-type="aff" rid="aff1"><sup>1,</sup></xref><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib><contrib contrib-type="author"><name><surname>Allen</surname><given-names>Robert</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib><contrib contrib-type="author"><name><surname>Trask</surname><given-names>Richard</given-names></name><xref ref-type="aff" rid="aff2"><sup>2</sup></xref></contrib><aff id="aff1"><label><sup>1</sup></label>Advanced Composites Centre for Innovation and Science (ACCIS), Department of Aerospace Engineering, <institution>University of Bristol</institution>, Queens School, Bristol, <country>United Kingdom</country>.</aff><aff id="aff2"><label><sup>2</sup></label>Department of Mechanical Engineering, <institution>University of Bath</institution>, Bath, <country>United Kingdom</country>.</aff></contrib-group><author-notes><corresp><addr-line>Address correspondence to:</addr-line><addr-line><italic>Thomas Llewellyn-Jones</italic></addr-line><addr-line><italic>Department of Mechanical Engineering</italic></addr-line><addr-line><italic>University of Bath</italic></addr-line><institution><italic>Bath</italic></institution><addr-line><italic>BA2 7AY</italic></addr-line><country>United Kingdom</country><break/><italic>E-mail:</italic><email xlink:href="mailto:tom.llewellyn-jones@bristol.ac.uk">tom.llewellyn-jones@bristol.ac.uk</email></corresp></author-notes><pub-date pub-type="ppub"><day>01</day><month>12</month><year>2016</year><!--string-date: December 2016--></pub-date><pub-date pub-type="epub"><day>01</day><month>12</month><year>2016</year></pub-date><pub-date pub-type="pmc-release"><day>01</day><month>12</month><year>2016</year></pub-date><!-- PMC Release delay is 0 months and
						0 days and was based on the <pub-date
						pub-type="epub"/>. --><volume>3</volume><issue>4</issue><fpage>236</fpage><lpage>243</lpage><permissions><copyright-statement>&#x000a9; Thomas Llewellyn-Jones, et al., 2016; Published by Mary Ann Liebert, Inc.</copyright-statement><copyright-year>2016</copyright-year><license license-type="open-access"><license-p>This Open Access article is distributed under the terms of the Creative Commons License (<ext-link ext-link-type="uri" xlink:href="http://creativecommons.org/licenses/by/4.0">http://creativecommons.org/licenses/by/4.0</ext-link>), which permits unrestricted use, distribution, and reproduction in any medium, provided the original work is properly credited.</license-p></license></permissions><self-uri content-type="pdf" xlink:type="simple" xlink:href="3dp.2016.0033.pdf"/><abstract><title>Abstract</title><p>An automated method for the generation of curved layer toolpaths is demonstrated to produce 3D printed components with improved aesthetic and structural properties using fused filament fabrication printing. Three case studies are shown, which demonstrate the ability of the G-code generating algorithm to resolve concave and convex structures. The combination of conventionally printed layers and curved layers within a single print is also demonstrated by producing double skin curved layer sandwich structures with static <italic>z</italic> printed cores. Clear improvements in the surface finish of printed components using curved layer fused filament fabrication are shown visually.</p></abstract><kwd-group kwd-group-type="author"><title><bold>Keywords:</bold>&#x02002;</title><kwd>3D printing</kwd><kwd>additive manufacturing</kwd><kwd>software</kwd><kwd>multimaterial printing</kwd></kwd-group><counts><fig-count count="4"/><equation-count count="1"/><ref-count count="29"/><page-count count="8"/></counts></article-meta></front><body><sec sec-type="intro" id="s001"><title>Introduction</title><p>A<sc>dditive layer manufacturing</sc> (ALM) is a term describing a variety of methods for constructing components from three-dimensional (3D) model data.<sup><xref rid="B1" ref-type="bibr">1</xref></sup> With the recent expiry of a number of key patents, the cost of many ALM techniques has reduced dramatically. As a result, these techniques vary from low-cost desktop consumer products to high-performance commercial manufacturing and prototyping. ALM techniques provide a number of distinct advantages over subtractive manufacturing methods in that they produce little or no waste, can build components more quickly, and can resolve internal features more easily.</p><p>ALM builds components layer wise, typically by dividing 3D model data into slices of equal thickness in horizontal planes. Each of these layers is then produced consecutively, with the technique of feedstock consolidation varying significantly between different forms of ALM. A number of ALM methods (such as stereolithography [SLA] and selective laser sintering [SLS]) make use of a bed of feedstock material on the build platform, which is solidified in selective regions through one of a number of methods. SLA printing requires a photocurable resin, which is then exposed to laser light to cross-link the polymer, while SLS printing also makes use of a laser to selectively sinter regions of material into a solid structure.<sup><xref rid="B1" ref-type="bibr">1</xref></sup> As many of these methods rely on precisely calibrated optical systems to solidify the feedstock material, they exhibit some of the highest resolutions and lowest defect rates available with ALM. Consequently, they typically have high associated machine and material costs, resulting in these methods being used almost exclusively for high value commercial applications. Despite this, many high performance materials have been developed to be compatible with these methods.<sup><xref rid="B2" ref-type="bibr">2</xref>,<xref rid="B3" ref-type="bibr">3</xref></sup></p><p>One of the most common forms of ALM is fused filament fabrication (FFF), in which thermoplastic filament is fed to a moving print head, which consists of a heated metal block above a fine nozzle. The thermoplastic feedstock is melted within the heated block and pressure from additional filament being driven to the head forces the melted plastic through the print nozzle. The print head moves along a precise toolpath, while polymer is extruded and deposited on the print bed to construct the desired component. As a result of its relative simplicity, FFF is inexpensive compared with other ALM techniques. Consequently, there is a wide range of materials available for FFF printing, and multimaterial printing is becoming increasingly reliable.<sup><xref rid="B4" ref-type="bibr">4</xref>,<xref rid="B5" ref-type="bibr">5</xref></sup></p><p>For deposition-based ALM methods, which utilize a moving print head such as FFF, toolpathing becomes an important factor in determining the quality of the finished component, both mechanically and aesthetically.<sup><xref rid="B6" ref-type="bibr">6</xref></sup> As aforementioned, ALM methods typically slice topological model data horizontally and print layers with a constant <italic>z-</italic>value consecutively. There are a number of disadvantages to producing components with static <italic>z</italic>-values within a single layer. The mechanical failure of printed components is often caused by failure between two layers within the model.<sup><xref rid="B7" ref-type="bibr">7</xref></sup> With static <italic>z</italic>-value layers, the position of these interlayer defects is often determined by the easiest orientation for printing, and may not be optimal for the mechanical properties of the component. Using dynamic <italic>z</italic>-values and producing curved layers, a component can be printed along its skin, thereby improving its mechanical properties and surface finish.<sup><xref rid="B8" ref-type="bibr">8</xref></sup> This combination of toolpathing and printing is known as curved layer fused filament fabrication (CLFFF), and there are a number of examples of methods to generate these toolpaths.<sup><xref rid="B9" ref-type="bibr">9&#x02013;11</xref></sup></p><p>As a result of the traditional static <italic>z</italic>-value layers used in FFF, most printer designs have matching <italic>x</italic> and <italic>y</italic> axes in terms of speed and acceleration, while the <italic>z</italic> axis is significantly slower. This is because the <italic>x</italic> and <italic>y</italic> axes are belt driven and manipulate the print head, whereas the <italic>z</italic> axis moves the entire build platform through a wide pitch leadscrew.<sup><xref rid="B12" ref-type="bibr">12</xref>,<xref rid="B13" ref-type="bibr">13</xref></sup> Due to the independence and orthogonality of each axis, these are generally called Cartesian style printers. This is not an issue in traditional FFF as the distances moved in the <italic>z</italic> direction are small (0.1&#x02013;0.4&#x02009;mm) and only occur at the end of each layer. This is, however, a significant hindrance in CLFFF, as print lines move dynamically in the <italic>z</italic> direction and so print speed is limited to the maximum speed in the <italic>z</italic> axis, which is dramatically slower than what the <italic>x</italic> and <italic>y</italic> axes can achieve. To overcome this issue, this study makes use of a delta style parallel robot, where all three axes are matched, with the print head manipulated by three arm pairs working in parallel. Print head speeds of 300&#x02009;mm/s are achievable in any direction, compared to a limit of &#x0223c;5&#x02009;mm/s in the <italic>z</italic> axis on a typical Cartesian style printer. This work demonstrates the use of a novel algorithm for producing CLFFF toolpaths to construct arbitrary 3D model files, with the ability to produce scaffold material, as well as dual skin models with a functional core structure.</p></sec><sec sec-type="materials|methods" id="s002"><title>Materials and Equipments</title><sec id="s003"><title>Delta-style FFF printer</title><p>To implement curved layer toolpaths within FFF, a delta style Rostock Max v2<sup><xref rid="B14" ref-type="bibr">14</xref></sup> parallel robot was used. Parallel robots operate by manipulating a number of arms to support and maneuver an end effector plate, with the arms working in parallel to manipulate the base plate, as opposed to more traditional serial robots where each effector is independent and unconstrained by the other effectors.<sup><xref rid="B15" ref-type="bibr">15</xref></sup> This parallel working method has the advantage of increased rigidity, as the error in position of the effector plate is averaged across the error in each axis, rather than cumulative. This rigidity is particularly useful in performing consecutive prints where the head must return to a known position to deposit further layers on top of previously printed material, such as printing a model on top of a scaffold structure after changing the material feedstock. The delta style parallel robot also has the advantage that all three axes are effected by the same arms and motors, meaning accelerations for all three axes are the same. Typically, Cartesian printers utilize a leadscrew-driven <italic>z</italic> axis, which reduces the potential acceleration of this axis and limits print speeds for CLFFF. The printer used in this study has been retro fitted with a number of upgrades to facilitate the CLFFF process used in this case. Significantly, 32-Bit hardware<sup><xref rid="B16" ref-type="bibr">16</xref></sup> is used in tandem with the latest dc42 fork of the RepRapFirmware<sup><xref rid="B17" ref-type="bibr">17</xref></sup> and auto calibration methods<sup><xref rid="B18" ref-type="bibr">18</xref></sup> to aid in processing the additional complexity of CLFFF toolpaths at typical FFF manufacturing speeds. In addition, an E3D v6 hotend and Flex3Drive extrusion system have been installed below the effector plate to relieve geometric constraints due to the standard print heads geometry and to assist in the extrusion of Thermoplastic Elastomer (TPE) feedstocks. The modified Rostock Max used in this study is pictured in <xref ref-type="fig" rid="f1">Figure 1</xref>.</p><fig id="f1" fig-type="figure" orientation="portrait" position="float"><label>FIG. 1.</label><caption><p>Modified Rostock Max v2 fused filament fabrication system used in this study.</p></caption><graphic xlink:href="fig-1"/></fig></sec></sec><sec id="s004"><title>Slicing Algorithm</title><p>A slicing algorithm has been developed to simplify the process of producing curved layer toolpaths for arbitrarily shaped components. To maintain simplicity, the algorithm has been designed to receive model data from an stereolithography (STL) file, in the same manner as the majority of slicing programs. The script used produces separate G-code files for each section of the print (e.g., scaffold, buffer layers, and model skins) to allow the feedstock material to be changed for each section of the model. This is essential when using insoluble scaffold material, as a flexible buffer layer must then be printed between the scaffold and model to allow for separation of each section. Currently the slicing algorithm requires the input model file to be a thin skin, with thickness much less than a single layer thickness. This skin is then repeated over a number of layers to produce a part with the desired thickness, and as such it is only possible to produce extruded 2D shapes with varying raster angle in each layer. The script is written in MATLAB.<sup><xref rid="B19" ref-type="bibr">19</xref></sup></p><sec id="s005"><title>Scaffold structure</title><p>The first G-code file generated by the algorithm produces a scaffold structure upon which the curved layer model will be printed. The scaffold is defined by a set of user input vectors, which are built up to match the bottom surface of the model and act as a temporary toolplate. The use of a vector system allows for any repeating cellular structure to be produced. The scaffold structure is printed with conventional static <italic>z</italic> layers as the resulting structural weaknesses are not of concern. The method to produce the scaffold works by producing a grid extending beyond the part and then clipping the grid lines to the outline of a top down projection of the model.</p><p>To clip the scaffold grid lines to the required print area, the outline of the shape must be determined. Initially the model data are loaded from an STL file, which contains a list of vertices and facet normals, which produce a triangular tessellation of the model. The model data are then centered in the <italic>x</italic> and <italic>y</italic> axes and translated in the <italic>z</italic> direction so that its lowest value for <italic>z</italic> matches the height of the print bed. This allows the coordinates for the model in computer aided design (CAD) space to be used for the printing coordinates, as this corresponds to the center of the Delta robot build platform, with the model just touching the platform surface. Depending upon user input, the model is then shifted above the build platform, to allow for additional scaffold material underneath the entire model, which produces a better surface finish on the bottom surface of the printed part.</p><p>The <italic>x</italic> and <italic>y</italic> coordinates of the outline are determined by producing a binary image of a top down projection of the model and using a Moore-Neighbor tracing algorithm to determine the outline of the shape exterior, as well as any internal holes. The outlines of each feature are stored separately, and points are sorted in a clockwise direction from the part center. This outline shape is then extended by a given distance using a preexisting MATLAB polygon manipulation library,<sup><xref rid="B20" ref-type="bibr">20</xref></sup> and the convex hull of the resulting polygon is found to produce the effective scaffolding area. While this can result in excessive print area by ignoring concave features in the projection outline, it significantly reduces travel moves and simplifies the structure of the scaffold.</p><p>The coordinates at which each grid line intersects the model outline are stored, as these are the start and end points for each print line in the scaffold. Each of these is a print move, whereas the movement from the end point of one print line to the start of the next is a travel move. When all the print lines in the layer are calculated, a nearest-neighbor approach is used to determine the order of the print lines in the layer, to reduce print times and minimize long travel moves. The <italic>x</italic> and <italic>y</italic> coordinates of a large number of reference points are then taken along each print line, and the <italic>z</italic>-value for the bottom layer of the model at each of these coordinates is calculated by interpolation over the model surface.</p><p>As aforementioned, if selected by the user the model file is shifted off the print bed by several millimeters to include space for scaffolding and buffer layers under the entire part, so the initial layers of the scaffold ignore changes to any of the initially calculated print lines. Consecutive static <italic>z</italic> layers are then included in the print file with the <italic>z</italic>-value increasing by the user input layer thickness, until the <italic>z</italic>-value of the current layer is equal to or greater than the <italic>z</italic>-value two layers below the bottom layer of the model at any of the reference points along any print line. It is then necessary to modify any effected print lines, either by retracting the start and end points of the print line further toward the interior of the model or splitting the print line into two or more separate print lines, depending upon the type of intersection. The modification required is easily found by determining whether the point(s) along the print line, which are above the model <italic>z</italic>-values, extend to the end of the print line. If this is the case, then the line is shortened until its entire length sits beneath the model. If this is not the case, the line is split at the two points of intersection. This process is iterated until no remaining reference points sit below the model.</p><p>Once this is completed, the coordinates of all print lines have been determined, and the next step is determining extrusion values. This is a volumetric calculation, requiring user inputs for the filament diameter and layer thickness. Using these, the extrusion value for a given print line is calculated by:
<disp-formula><tex-math id="eq1" notation="LaTeX">\documentclass{aastex}\usepackage{amsbsy}\usepackage{amsfonts}\usepackage{amssymb}\usepackage{bm}\usepackage{mathrsfs}\usepackage{pifont}\usepackage{stmaryrd}\usepackage{textcomp}\usepackage{portland, xspace}\usepackage{amsmath, amsxtra}\pagestyle{empty}\DeclareMathSizes{10}{9}{7}{6}\begin{document}
\begin{align*}
E = {w_t}{l_t} \sqrt {{{ \left( {{y_2} - {y_1}} \right) }^2} + {{ \left( {{x_2} - {x_1}} \right) }^2}}
\end{align*}
\end{document}</tex-math></disp-formula></p><p>Where <italic>E</italic> is the extrusion value, <italic>w<sub>t</sub></italic> is the wall thickness of each print line (determined by the nozzle diameter), <italic>l<sub>t</sub></italic> is the user input layer thickness, and <italic>x<sub>1</sub></italic>, <italic>y<sub>1</sub></italic>, <italic>x<sub>2</sub></italic>, <italic>y<sub>2</sub></italic> correspond to the <italic>x</italic> and <italic>y</italic> coordinates of the start and end points, respectively, with all values in millimeters. It is assumed that the cross section of a printed line is roughly rectangular. The extrusion value corresponds to the length of filament which is driven through the extruder for a given print line. Once the extrusion values for all the print lines are calculated, the print file for the scaffold is written to file, using the user input values for print and travel speeds. At each travel move, extra G-code commands are inserted to quickly raise the print head and retract the filament several mm before travelling and return the head and filament after travelling. This helps to prevent filament stringing and dragging the print head across the scaffold.</p></sec><sec id="s006"><title>Curved layer model</title><p>Once the scaffold file has been completed, the algorithm then produces a buffer layer file (if selected by the user) and the model file. Both of these, along with the top layers of the scaffold, are generated using the same slicing process. Traditional slicing considers a 3D model and takes a slice of the model along a horizontal plane. To produce curved layer toolpaths, a slice must instead be taken in a vertical plane. To allow for maximum control, the slicing method was made so that any angle of this plane to the <italic>x</italic> axis, and therefore, the direction of each of the print lines in a layer, could be used. This also allows for different slicing angles between layers, resulting in user defined toolpath raster angles. Consequently, slicing time increases significantly, but print files can be designed to maximize part strength within specific 3D planes.</p><p>To produce a smooth finish on the outer edges of the part, an outline of the shape is printed at the beginning of each layer, which is subsequently infilled. This outline is the one originally determined during the scaffold slicing stage. As the outline for each layer is identical due to the previously described limitations of the slicer, it is only necessary to calculate these coordinates once, with each subsequent layer outline simply shifted in the <italic>z</italic> axis by a single layer thickness. The <italic>z</italic>-value at each point is interpolated from the model data using a linear scattered interpolation method, and these coordinates form the outline print for each layer.</p><p>Once the outline is completed, the slicing process for each individual layer begins. A vertical plane is generated at an angle (given by user input) to the <italic>x</italic> axis at one edge of the component. This plane is iteratively shifted by one wall thickness toward the far edge of the part, and any triangular elements, which are contained between two neighboring planes, are taken as being part of a single slice. As with the scaffold structure, the points of intersection between the print lines and the shape outline are noted as start and end points for a single print line, and the <italic>x</italic> and <italic>y</italic> coordinates of a large number of points along this print line are determined. The <italic>z</italic>-values for each point are interpolated from the model data as before. Unlike the scaffold material, where the <italic>z</italic>-values were used as limits for the scaffold height, these <italic>z</italic>-values are now used as the positions for the print lines, producing curved layers. Components with steep gradients will require large numbers of points along each print line to properly resolve the model shape, which can cause the print speed to slow significantly, as the motor controller automatically decelerates the print head toward the end of each print line. With too many small print lines in succession, the full speed of the printer is never reached, and therefore, steep gradients should be avoided where possible. As typical printers utilize an 8-bit processor, the buffer in the control board may also quickly saturate if large numbers of small print lines are used, resulting in jerky print head movement, which significantly affects the quality of the component. Extrusion values are calculated in the same manner as the scaffold structure print lines.</p><p>This process is iterated through all the unique user input layer angles. Each unique angle is only calculated once, as the layers must be identical as previously described. Once this is completed, the full sequence of layers is compiled, with each consecutive layer shifted by one layer thickness above the previous layer in the <italic>z</italic> direction. At this stage the compiled print data are written to a G-code file.</p></sec></sec><sec id="s007"><title>Case Studies</title><p>To experimentally demonstrate the effectiveness of the CLFFF slicing algorithm, three case study example components were fabricated as follows.</p><sec id="s008"><title>Case study 1: vehicle body panel</title><p>The first example demonstrated in this study is the manufacture of a scaled bonnet panel for a production vehicle, which measures &#x0223c;120&#x02009;&#x000d7;&#x02009;120&#x02009;mm at its largest dimensions, adapted from an open source design.<sup><xref rid="B21" ref-type="bibr">21</xref></sup> The desired surface region of the CAD data file to be manufactured is carefully selected using a suitable software package. In this study Autodesk Meshmixer<sup><xref rid="B22" ref-type="bibr">22</xref></sup> was used, and the selected region of the mesh file is highlighted in <xref ref-type="fig" rid="f2">Figure 2-A1</xref>. For this example, the slicing algorithm is used in its basic function to create a doubly curved convex surface panel with complex outer geometry and of precise exterior dimensions with uniform thickness. The CLFFF part is manufactured in a similar style to our previous work,<sup><xref rid="B9" ref-type="bibr">9</xref></sup> consisting of a sacrificial scaffold structure manufactured from PLA using conventional toolpathing and a TPE<sup><xref rid="B23" ref-type="bibr">23</xref></sup> buffer layer that follows the part surface geometry to support the CLFFF part during manufacturing. The panel consists of 15 individual CLFFF layers with consistently varying raster angles giving an overall panel thickness of 3.0&#x02009;mm, and a detailed digital representation of the individual generated toolpaths is detailed in <xref ref-type="fig" rid="f2">Figure 2-B1</xref>. The ability to vary raster angles ensures maximum and uniform part strength in the plane of the CLFFF surface. To further demonstrate the advantages of CLFFF toolpathing, an identical part was manufactured using Simplify3D, a commercial slicing software.<sup><xref rid="B24" ref-type="bibr">24</xref></sup> This part uses the inbuilt support structure function to manufacture the complex geometries of this panel. The input mesh data are a 3.0&#x02009;mm in-plane extrusion of the panel skin file imaged in <xref ref-type="fig" rid="f2">Figure 2-A2</xref>, and the conventional generated toolpath is detailed in <xref ref-type="fig" rid="f2">Figure 2-B2</xref>. In both examples the final parts were manufactured using colored PLA for clarity and then fitted to a physical model of the CAD file used for comparison and are imaged in <xref ref-type="fig" rid="f2">Figure 2-C1 and C2</xref>, respectively.</p><fig id="f2" fig-type="figure" orientation="portrait" position="float"><label>FIG. 2.</label><caption><p>Vehicle body panel: <bold>(A1)</bold> CAD render of vehicle with selection highlighted in <italic>blue</italic>; <bold>(A2)</bold> Upper and lower surfaces of mesh for conventional slicing; <bold>(B1)</bold> Visualization of CLFFF toolpath generated for manufacturing; <bold>(B2)</bold> Visualization of conventional FFF toolpath for comparison; <bold>(C1)</bold> CLFFF manufactured part fitted to model; and <bold>(C2)</bold> Conventional FFF manufactured part fitted to model for comparison. CLFFF, curved layer fused filament fabrication; CAD, computer aided design; FFF, fused filament fabrication.</p></caption><graphic xlink:href="fig-2"/></fig></sec><sec id="s009"><title>Case study 2: shoe insole</title><p>The second example manufactured in this study is a modified insole for a UK size nine male shoe, measuring &#x0223c;265&#x02009;&#x000d7;&#x02009;90&#x02009;&#x000d7;&#x02009;20&#x02009;mm.<sup><xref rid="B25" ref-type="bibr">25</xref></sup> The basic mesh structure is detailed in <xref ref-type="fig" rid="f3">Figure 3-A1</xref>. To demonstrate the ability to use CLFFF toolpaths in tandem with conventional toolpathing techniques, the model is divided into three separate regions as detailed in <xref ref-type="fig" rid="f3">Figure 3-A2</xref>. In this case both core and lower skin structures are manufactured using toolpaths generated by Simplify3D software. This structure then acts as the support structure for the final form fitting CLFFF layers and negating the necessity for the scaffold and buffer layers used in case study 1. <xref ref-type="fig" rid="f3">Figure 3-B1</xref> illustrates a region of the CLFFF toolpath used in this study demonstrating how the conventional model supports the CLFFF layers, with raster angle being varied similarly to case study 1.</p><fig id="f3" fig-type="figure" orientation="portrait" position="float"><label>FIG. 3.</label><caption><p>Shoe Insole: <bold>(A1)</bold> Original part mesh; <bold>(A2)</bold> Adapted part split into three regions; <bold>(B1)</bold> Visualization of CLFFF toolpath generated for manufacturing; <bold>(B2)</bold> Visualization of conventional FFF toolpath for comparison; <bold>(C1)</bold> CLFFF manufactured part, surface detail <italic>inset</italic>; <bold>(C2)</bold> Conventional FFF manufactured part for comparison surface detail <italic>inset</italic>; <bold>(C3)</bold> Backlit CLFFF manufactured part revealing core structure; and <bold>(C4)</bold> Backlit CLFFF manufactured part demonstrating its flexible properties.</p></caption><graphic xlink:href="fig-3"/></fig><p>For comparison an identical part was manufactured by combining all three model parts again using Simplify3D. The generated conventional toolpath is visualized in <xref ref-type="fig" rid="f3">Figure 3-B2</xref>, with the final portion of the code missing to reveal how both core and upper skin structures are constructed simultaneously in this case. To improve the function of the final parts, all components were manufacturing using TPE material,<sup><xref rid="B23" ref-type="bibr">23</xref></sup> and final comparisons of CLFFF and conventional components are imaged in <xref ref-type="fig" rid="f3">Figure 3-C1 and C2</xref>. The core structure of the CLFFF component was constructed using a colored TPE to allow better visual assessment of the quality of the manufacture process and further demonstrate additional benefits of CLFFF toolpathing. <xref ref-type="fig" rid="f3">Figure 3-C3</xref> is a backlit image of the same component revealing its detailed core structure in this case, while <xref ref-type="fig" rid="f3">Figure 3-C4</xref> demonstrates the performance of the CLFFF TPE insole under mechanical stress.</p></sec><sec id="s010"><title>Case study 3: dished sandwich panel</title><p>The final case study demonstrated is a concave parabolic reflector adapted from the freely available NASA voyager space probe model<sup><xref rid="B26" ref-type="bibr">26</xref></sup> detailed in <xref ref-type="fig" rid="f4">Figure 4-A1</xref>. The parabolic dish model used in this case measures &#x0223c;150&#x02009;mm in diameter with a depth of 22&#x02009;mm and in-plane thickness of 14&#x02009;mm. This example is used to show how CLFFF can be used to create multifunctional sandwich panel structures with complex doubly curved upper and lower surfaces and intricate core structures. <xref ref-type="fig" rid="f4">Figure 4-A2</xref> details two core structures investigated in this study. To manufacture these components, the lower part surface is constructed identically to the vehicle panel in case study 1, and example G-code is visualized in <xref ref-type="fig" rid="f4">Figure 4-B1</xref>. The core structure is then manufactured using conventional toolpathing, allowing the inclusion of complex core structures. In this example a honeycomb structure and university logo are used, but in practice any desired function could be added to the core structure, as long as the core structure can sufficiently support the upper surface structure as detailed in <xref ref-type="fig" rid="f4">Figure 4-B2</xref>. Furthermore, in this example parts are manufactured to have identical upper and lower surfaces for clarity, but the method can be used with differing upper and lower part surface geometries as detailed in case study 2, for example. <xref ref-type="fig" rid="f4">Figure 4-C1 and C2</xref> images the upper and lower surfaces of the CLFFF manufactured sandwich panel structures, respectively, and <xref ref-type="fig" rid="f4">Figure 4-C3 and C4</xref> reveals the core structures of the same parts using a backlight.</p><fig id="f4" fig-type="figure" orientation="portrait" position="float"><label>FIG. 4.</label><caption><p>Parabolic dish sandwich panel: <bold>(A1)</bold> Original model with highlighted part mesh; <bold>(A2)</bold> Adapted sandwich panels split into three regions; <bold>(B1)</bold> Visualization of CLFFF toolpath generated for lower surface manufacturing; <bold>(B2)</bold> Visualization of CLFFF toolpath for upper surface manufacturing; <bold>(C1)</bold> Lower surface of honeycomb core sandwich panel; <bold>(C2)</bold> Upper surface of logo core sandwich panel; <bold>(C3)</bold> Lower surface of honeycomb core sandwich panel backlit revealing core structure; and <bold>(C2)</bold> Upper surface of logo core sandwich panel backlit revealing core structure.</p></caption><graphic xlink:href="fig-4"/></fig></sec></sec><sec sec-type="discussion" id="s011"><title>Discussion and Conclusions</title><p>This study shows the ability to automatically generate curved layer G-code toolpaths for arbitrary shapes from a typical CAD model file, which are then successfully printed with a delta shape FFF 3D printer. Experimental results have clearly shown the efficacy of using curved layers to improve the surface finish of a printed component. Three case studies were used to demonstrate curved layer toolpath generation and printing of both concave and convex shapes. Comparisons of the print components and CAD files show high fidelity, with no observed distortion of the model during slicing.</p><p>At present, model files are limited to extruded 2D skins, and further work is required to implement this slicing procedure in full 3D models. It has also been shown that combining the use of curved layer and conventional static <italic>z</italic> layers is possible, which will enable simple inclusion of curved layer printing on the outer layers of conventionally printed parts to improve surface finish and reduce the risk of layer delamination. Combining these two slicing methods also minimizes the risk of print failure from curved layers with steep gradients and provides a route to printing full 3D objects with curved layers rather than extruded skins. Structural testing is required to determine the effect of this curved layer printing on the mechanical properties of final components.</p><p>The case study samples used in this study were chosen specifically to prove the effectiveness of the slicing algorithm and as such are not suitable for mechanical testing. Very long print times for these case studies also make production of a statistically significant sample size prohibitively slow. Mechanical testing of components from both traditional FFF and CLFFF, for direct comparison, is the subject of ongoing work. The ability to control the direction of print lines in a given layer will enable tailoring of structural properties by making use of the orthotropic properties of FFF printed materials, which may be enhanced by the use of short fiber reinforced thermoplastic filaments as a feedstock. Potential applications for this algorithm include the following: printing embedded electronics in components with complex geometries thereby forming a structural computer; printing of bespoke, personalized biological scaffolds for bone regrowth; and inclusion of smooth vacuoles within thin shell structures with complex topology for self-healing purposes.<sup><xref rid="B27" ref-type="bibr">27&#x02013;29</xref></sup></p></sec></body><back><sec id="s012" sec-type="ack"><title>Acknowledgments</title><p>This work was supported by the Engineering and Physical Sciences Research Council through the EPSRC Centre for Doctoral Training in Advanced Composites for Innovation and Science (Grant No. EP/G036772/1). The authors gratefully acknowledge the support of the UK EPSRC for funding Prof. Richard S. Trask's fellowship and research under EPSRC &#x0201c;Engineering Fellowships for Growth&#x0201d; (Grant No. EP/M002489/1).</p></sec><sec id="s013" sec-type="COI-statement"><title>Author Disclosure Statement</title><p>No competing financial interests exist.</p></sec><ref-list content-type="parsed"><title>References</title><ref id="B1"><label>1</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Levy</surname><given-names>GN</given-names></name></person-group>, <person-group person-group-type="author"><name><surname>Schindel</surname><given-names>R</given-names></name></person-group>, <person-group person-group-type="author"><name><surname>Kruth</surname><given-names>JP</given-names></name></person-group>
<article-title>Rapid manufacturing and rapid tooling with layer manufacturing (LM) technologies, state of the art and future perspectives</article-title>. <source>CIRP Ann Manuf Tech</source>
<year>2003</year>;<volume>52</volume>:<fpage>589</fpage>&#x02013;<lpage>609</lpage></mixed-citation></ref><ref id="B2"><label>2</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Wang</surname><given-names>Y</given-names></name></person-group>, <person-group person-group-type="author"><name><surname>James</surname><given-names>E</given-names></name></person-group>, <person-group person-group-type="author"><name><surname>Ghita</surname><given-names>OR</given-names></name></person-group>
<article-title>Glass bead filled Polyetherketone (PEK) composite by High Temperature Laser Sintering (HT-LS)</article-title>. <source>Mater Design</source>
<year>2015</year>;<volume>83</volume>:<fpage>545</fpage>&#x02013;<lpage>551</lpage></mixed-citation></ref><ref id="B3"><label>3</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Yan</surname><given-names>C</given-names></name></person-group>, <person-group person-group-type="author"><name><surname>Hao</surname><given-names>L</given-names></name></person-group>, <person-group person-group-type="author"><name><surname>Xu</surname><given-names>L</given-names></name>, <etal><italic>et al.</italic></etal></person-group>
<article-title>Preparation, characterisation and processing of carbon fibre/polyamide-12 composites for selective laser sintering</article-title>. <source>Compos Sci Technol</source>
<year>2011</year>;<volume>71</volume>:<fpage>1834</fpage>&#x02013;<lpage>1841</lpage></mixed-citation></ref><ref id="B4"><label>4</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Matsuzaki</surname><given-names>R</given-names></name></person-group>, <person-group person-group-type="author"><name><surname>Ueda</surname><given-names>M</given-names></name></person-group>, <person-group person-group-type="author"><name><surname>Namiki</surname><given-names>M</given-names></name>, <etal><italic>et al.</italic></etal></person-group>
<article-title>Three-dimensional printing of continuous-fiber composites by in-nozzle impregnation</article-title>. <source>Sci Rep</source>
<year>2016</year>;<volume>6</volume>:<fpage>23058</fpage><pub-id pub-id-type="pmid">26965201</pub-id></mixed-citation></ref><ref id="B5"><label>5</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Dimas</surname><given-names>LS</given-names></name></person-group>, <person-group person-group-type="author"><name><surname>Bratzel</surname><given-names>GH</given-names></name></person-group>, <person-group person-group-type="author"><name><surname>Eylon</surname><given-names>I</given-names></name>, <etal><italic>et al.</italic></etal></person-group>
<article-title>Tough composites inspired by mineralized natural materials: Computation, 3D printing, and testing</article-title>. <source>Adv Funct Mater</source>
<year>2013</year>;<volume>23</volume>:<fpage>4629</fpage>&#x02013;<lpage>4638</lpage></mixed-citation></ref><ref id="B6"><label>6</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Bellini</surname><given-names>A</given-names></name></person-group>, <person-group person-group-type="author"><name><surname>G&#x000fc;&#x000e7;eri</surname><given-names>S</given-names></name></person-group>
<article-title>Mechanical characterization of parts fabricated using fused deposition modeling</article-title>. <source>Rapid Prototyping J</source>
<year>2003</year>;<volume>9</volume>:<fpage>252</fpage>&#x02013;<lpage>264</lpage></mixed-citation></ref><ref id="B7"><label>7</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Bellehumeur</surname><given-names>C</given-names></name></person-group>, <person-group person-group-type="author"><name><surname>Li</surname><given-names>L</given-names></name></person-group>, <person-group person-group-type="author"><name><surname>Sun</surname><given-names>Q</given-names></name>, <etal><italic>et al.</italic></etal></person-group>
<article-title>Modeling of bond formation between polymer filaments in the fused deposition modeling process</article-title>. <source>JMP</source>
<year>2004</year>;<volume>6</volume>:<fpage>170</fpage>&#x02013;<lpage>178</lpage></mixed-citation></ref><ref id="B8"><label>8</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Singamneni</surname><given-names>S</given-names></name></person-group>, <person-group person-group-type="author"><name><surname>Diegel</surname><given-names>O</given-names></name></person-group>, <person-group person-group-type="author"><name><surname>Huang</surname><given-names>B</given-names></name>, <etal><italic>et al.</italic></etal></person-group>
<article-title>Curved layer fused deposition modeling</article-title>. <source>Sabinet</source>
<year>2010</year>;<volume>8</volume>:<fpage>95</fpage>&#x02013;<lpage>107</lpage></mixed-citation></ref><ref id="B9"><label>9</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Allen</surname><given-names>RJA</given-names></name></person-group>, <person-group person-group-type="author"><name><surname>Trask</surname><given-names>RS</given-names></name></person-group>
<article-title>An experimental demonstration of effective Curved Layer Fused Filament Fabrication utilising a parallel deposition robot</article-title>. <source>Additive Manuf</source>
<year>2015</year>;<volume>8</volume>:<fpage>78</fpage>&#x02013;<lpage>87</lpage></mixed-citation></ref><ref id="B10"><label>10</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Chakraborty</surname><given-names>D</given-names></name></person-group>, <person-group person-group-type="author"><name><surname>Aneesh Reddy</surname><given-names>B</given-names></name></person-group>, <person-group person-group-type="author"><name><surname>Roy Choudhury</surname><given-names>A</given-names></name></person-group>
<article-title>Extruder path generation for Curved Layer Fused Deposition Modeling</article-title>. <source>CAD</source>
<year>2008</year>;<volume>40</volume>:<fpage>235</fpage>&#x02013;<lpage>243</lpage></mixed-citation></ref><ref id="B11"><label>11</label><mixed-citation publication-type="book"><person-group person-group-type="author"><name><surname>Huang</surname><given-names>B</given-names></name></person-group>
<article-title>Alternate Slicing and Deposition Strategies for Fused Deposition Modelling</article-title> [PhD Thesis]. <publisher-loc>Auckland (New Zealand)</publisher-loc>: <publisher-name>Auckland University of Technology</publisher-name>, <year>2014</year></mixed-citation></ref><ref id="B12"><label>12</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Jones</surname><given-names>R</given-names></name></person-group>, <person-group person-group-type="author"><name><surname>Haufe</surname><given-names>P</given-names></name></person-group>, <person-group person-group-type="author"><name><surname>Sells</surname><given-names>E</given-names></name>, <etal><italic>et al.</italic></etal></person-group>
<article-title>RepRap&#x02014;The replicating rapid prototyper</article-title>. <source>Robotica</source>
<year>2011</year>;<volume>29</volume>:<fpage>177</fpage>&#x02013;<lpage>191</lpage></mixed-citation></ref><ref id="B13"><label>13</label><mixed-citation publication-type="web"><collab>Ultimaker Original+</collab>. <uri xlink:type="simple" xlink:href="http://ultimaker.com/en/products/ultimaker-original">https://ultimaker.com/en/products/ultimaker-original</uri> (last accessed <date-in-citation><month>5</month><year>2016</year></date-in-citation>)</mixed-citation></ref><ref id="B14"><label>14</label><mixed-citation publication-type="web"><collab>SeeMeCNC<sup>&#x000ae;</sup> Rostock MAX&#x02122; v2 Desktop 3D Printer Kit</collab>. <uri xlink:type="simple" xlink:href="http://www.seemecnc.com/products/rostock-max-complete-kit">www.seemecnc.com/products/rostock-max-complete-kit</uri> (last accessed <date-in-citation><month>5</month><year>2016</year></date-in-citation>)</mixed-citation></ref><ref id="B15"><label>15</label><mixed-citation publication-type="confproc"><person-group person-group-type="author"><name><surname>Clavel</surname><given-names>R</given-names></name></person-group>
<article-title>DELTA, a fast robot with parallel geometry</article-title>. <conf-name>Proceedings of the International Symposium on Industrial Robotics</conf-name>, <conf-loc>New York</conf-loc>, <year>1988</year>; pp. <fpage>91</fpage>&#x02013;<lpage>100</lpage></mixed-citation></ref><ref id="B16"><label>16</label><mixed-citation publication-type="web"><collab>Duet</collab>. <uri xlink:type="simple" xlink:href="http://reprap.org/wiki/Duet">http://reprap.org/wiki/Duet</uri> (last accessed <date-in-citation><month>5</month><year>2016</year></date-in-citation>)</mixed-citation></ref><ref id="B17"><label>17</label><mixed-citation publication-type="web"><collab>RepRapFirmware</collab>. <uri xlink:type="simple" xlink:href="http://github.com/dc42/RepRapFirmware">https://github.com/dc42/RepRapFirmware</uri> (last accessed <date-in-citation><month>5</month><year>2016</year></date-in-citation>)</mixed-citation></ref><ref id="B18"><label>18</label><mixed-citation publication-type="web"><collab>FSR Endstop</collab>. <uri xlink:type="simple" xlink:href="http://github.com/JohnSL/FSR_Endstop">https://github.com/JohnSL/FSR_Endstop</uri> (last accessed <date-in-citation><month>5</month><year>2016</year></date-in-citation>)</mixed-citation></ref><ref id="B19"><label>19</label><mixed-citation publication-type="book"><collab>MATLAB</collab>. version 8.3.0.532 (R2014a). <publisher-name>The MathWorks, Inc.</publisher-name>, <year>2014</year></mixed-citation></ref><ref id="B20"><label>20</label><mixed-citation publication-type="web"><collab>Clipper</collab>. <uri xlink:type="simple" xlink:href="http://uk.mathworks.com/matlabcentral/fileexchange/36241-polygon-clipping-and-offsetting">http://uk.mathworks.com/matlabcentral/fileexchange/36241-polygon-clipping-and-offsetting</uri> (last accessed <date-in-citation><month>10</month><day>1</day>, <year>2015</year></date-in-citation>)</mixed-citation></ref><ref id="B21"><label>21</label><mixed-citation publication-type="web"><collab>Porsche Carrera GT by Domonoky&#x02014;Thingiverse</collab>. <uri xlink:type="simple" xlink:href="http://www.thingiverse.com/thing:4984">www.thingiverse.com/thing:4984</uri> (last accessed <date-in-citation><month>5</month><year>2016</year></date-in-citation>)</mixed-citation></ref><ref id="B22"><label>22</label><mixed-citation publication-type="web"><collab>MeshMixer</collab>. <uri xlink:type="simple" xlink:href="http://meshmixer.com">http://meshmixer.com</uri> (last accessed <date-in-citation><month>5</month><year>2016</year></date-in-citation>)</mixed-citation></ref><ref id="B23"><label>23</label><mixed-citation publication-type="web"><collab>NinjaFlex</collab>. <uri xlink:type="simple" xlink:href="http://www.ninjaflex3d.com">www.ninjaflex3d.com</uri> (last accessed <date-in-citation><month>5</month><year>2016</year></date-in-citation>)</mixed-citation></ref><ref id="B24"><label>24</label><mixed-citation publication-type="web"><collab>Simplify3D</collab>. <uri xlink:type="simple" xlink:href="http://www.simplify3d.com">www.simplify3d.com</uri> (last accessed <date-in-citation><month>5</month><year>2016</year></date-in-citation>)</mixed-citation></ref><ref id="B25"><label>25</label><mixed-citation publication-type="web"><collab>Insole</collab>. <uri xlink:type="simple" xlink:href="http://www.thingiverse.com/thing:523543">www.thingiverse.com/thing:523543</uri> (last accessed <date-in-citation><month>5</month><year>2016</year></date-in-citation>)</mixed-citation></ref><ref id="B26"><label>26</label><mixed-citation publication-type="web"><collab>Voyager Dish</collab>. <uri xlink:type="simple" xlink:href="http://nasa3d.arc.nasa.gov/detail/jpl-vtad-voyager">http://nasa3d.arc.nasa.gov/detail/jpl-vtad-voyager</uri> (last accessed <date-in-citation><month>5</month><year>2016</year></date-in-citation>)</mixed-citation></ref><ref id="B27"><label>27</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Leigh</surname><given-names>SJ</given-names></name></person-group>, <person-group person-group-type="author"><name><surname>Bradley</surname><given-names>RJ</given-names></name></person-group>, <person-group person-group-type="author"><name><surname>Purssell</surname><given-names>CP</given-names></name>, <etal><italic>et al.</italic></etal></person-group>
<article-title>A simple, low-cost conductive composite material for 3D printing of electronic sensors</article-title>. <source>PLoS One</source>
<year>2012</year>;<volume>7</volume>:<fpage>e49365</fpage><pub-id pub-id-type="pmid">23185319</pub-id></mixed-citation></ref><ref id="B28"><label>28</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Murphy</surname><given-names>SV</given-names></name></person-group>, <person-group person-group-type="author"><name><surname>Atala</surname><given-names>A</given-names></name></person-group>
<article-title>3D bioprinting of tissues and organs</article-title>. <source>Nat Biotechnol</source>
<year>2014</year>;<volume>32</volume>:<fpage>773</fpage>&#x02013;<lpage>785</lpage><pub-id pub-id-type="pmid">25093879</pub-id></mixed-citation></ref><ref id="B29"><label>29</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Trask</surname><given-names>RS</given-names></name></person-group>, <person-group person-group-type="author"><name><surname>Williams</surname><given-names>HR</given-names></name></person-group>, <person-group person-group-type="author"><name><surname>Bond</surname><given-names>IP</given-names></name>, <etal><italic>et al.</italic></etal></person-group>
<article-title>Self-healing polymer composites: mimicking nature to enhance performance</article-title>. <source>Bioinspir Biomim</source>
<year>2007</year>;<volume>2</volume>:<fpage>P1</fpage>&#x02013;<lpage>P9</lpage><pub-id pub-id-type="pmid">17671320</pub-id></mixed-citation></ref></ref-list></back></article>